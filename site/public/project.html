<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Page</title>
    <link rel="stylesheet" href="project.css">
</head>

<!--

Custom from Nick needs to be fit into the old html


<div className="content">
                <div className="loading">Loading</div>
                <div className="trigger"></div>
                <div className="section">
                    <h1>Who is Pete?</h1>
                    <h3>Pilot Pete - the ForeFlight First Officer</h3>
                    <p>The FO you always needed but never had</p>
                    <div className="phonetic"> V0.1 - OpenAI-Turbo-4o </div>
                    <div className="scroll-cta">ForeFlights getting complicated, lets delegate the responsibility of those small and tedious tasks with the use of AI</div>
                </div>
                <div className="section right">
                    <h2>Lets ask a question and walk through what happens</h2>
                </div>
                <div className="ground-container">
                    <div className="parallax ground"></div>
                    <div className="section right">
                        <h2>Add a new favorite airport "KSFM" for me</h2>
                        <p>...lets let AI take care of the rest</p>
                    </div>
                    <div className="section">
                        <h2>Pilot Pete breaks down the steps</h2>
                        <p>Once hes knows what to do he sends the instructions and a screenshot of the app to Fred the Flight Instructor</p>
                    </div>
                    <div className="section right">
                        <h2>Freds job is to read the screen and determine what coordinates to tap next</h2>
                        <p>...he uses AI vision to complete this</p>
                    </div>
                    <div className="parallax clouds"></div>
                </div>
                <div className="blueprint">
                    <svg width="100%" height="100%" viewBox="0 0 100 100">
                        <line id="line-length" x1="10" y1="80" x2="90" y2="80" strokeWidth="0.5"></line>
                        <path id="line-wingspan" d="M10 50, L40 35, M60 35 L90 50" strokeWidth="0.5"></path>
                        <circle id="circle-phalange" cx="60" cy="60" r="15" fill="transparent" strokeWidth="0.5"></circle>
                    </svg>
                    <div className="section dark ">
                        <h2>Fred tells Pete what coordinates of the screen he needs to tap</h2>
                        <p>So how does Pete actually tap on the device?</p>
                    </div>
                    <div className="section dark length">
                        <h2>XCUITest</h2>
                        <p>Using an Appium Python Client, Pete is able to tap exactly where Fred told him to</p>
                    </div>
                    <div className="section dark wingspan">
                        <h2>Did he get it right?</h2>
                        <p>Like any good CFI, Fred is checking Petes work, and will correct him if necessary</p>
                    </div>
                    <div className="section dark phalange">
                        <h2>Well Pete successfully moves to the next step, what happens now?</h2>
                        <p>Fred commands Pete to work on the next step and complete the given task</p>
                    </div>
                    <div className="section dark">
                        <h2>Next steps?</h2>
                        <p>This cycle continues until the original task is complete</p>
                    </div>
                    <div className="section"></div>
                </div>
                <div className="sunset">
                    <div className="section"></div>
                    <div className="section end">
                        <p>Credits to @NH via Slack</p>
                        <p>Nicholas Hopper & Nick Heyland</p>
                    </div>
                </div>
            </div>



-->

<div class="content">
    <div class="loading"></div>
    <div class="trigger"></div>
    <div class="section">

        <h1>Airplanes.</h1>
        <h3>The beginners guide.</h3>
        <p>You've probably forgotten what these are.</p>
        <!-- 		<div class="phonetic">/ ˈɛərˌpleɪn /</div> -->
        <div class="scroll-cta">Scroll</div>
    </div>

    <div class="section right">
        <h2>They're kinda like buses...</h2>
    </div>

    <div class="ground-container">
        <div class="parallax ground"></div>
        <div class="section right">
            <h2>..except they leave the ground.</h2>
            <p>Saaay what!?.</p>
        </div>

        <div class="section">
            <h2>They fly through the sky.</h2>
            <p>For realsies!</p>
        </div>

        <div class="section right">
            <h2>Defying all known physical laws.</h2>
            <p>It's actual magic!</p>
        </div>
        <div class="parallax clouds"></div>
    </div>

    <div class="blueprint">
        <svg width="100%" height="100%" viewbox="0 0 100 100">
            <line id="line-length" x1="10" y1="80" x2="90" y2="80" stroke-width="0.5"></line>
            <path id="line-wingspan" d="M10 50, L40 35, M60 35 L90 50" stroke-width="0.5"></path>
            <circle id="circle-phalange" cx="60" cy="60" r="15" fill="transparent" stroke-width="0.5"></circle>
        </svg>
        <div class="section dark ">
            <h2>The facts and figures.</h2>
            <p>Lets get into the nitty gritty...</p>
        </div>
        <div class="section dark length">
            <h2>Length.</h2>
            <p>Long.</p>
        </div>
        <div class="section dark wingspan">
            <h2>Wing Span.</h2>
            <p>I dunno, longer than a cat probably.</p>
        </div>
        <div class="section dark phalange">
            <h2>Left Phalange</h2>
            <p>Missing</p>
        </div>
        <div class="section dark">
            <h2>Engines</h2>
            <p>Turbine funtime</p>
        </div>
        <!-- 		<div class="section"></div> -->
    </div>
    <div class="sunset">
        <div class="section"></div>
        <div class="section end">
            <h2>Fin.</h2>
            <ul class="credits">
                <li>Plane model by <a href="https://poly.google.com/view/8ciDd9k8wha" target="_blank">Google</a></li>
                <li>Animated using <a href="https://greensock.com/scrolltrigger/" target="_blank">GSAP ScrollTrigger</a></li>
            </ul>
        </div>
    </div>
</div>
<!-- External scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
<!-- Only works from local or codepen -->
<script src="https://assets.codepen.io/16327/DrawSVGPlugin3.min.js"></script>
    <!-- https://gsap.com/docs/v3/Installation?tab=cdn&module=esm&method=private+registry&tier=free&club=false&require=false&trial=true -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>


    // there are 3 parts to this
    //
    // Scene:           Setups and manages threejs rendering
    // loadModel:       Loads the 3d obj file
    // setupAnimation:  Creates all the GSAP
    //                  animtions and scroll triggers
    //
    // first we call loadModel, once complete we call
    // setupAnimation which creates a new Scene

    class Scene
    {
        constructor(model)
        {
            this.views = [
                { bottom: 0, height: 1 },
                { bottom: 0, height: 0 }
            ];

            this.renderer = new THREE.WebGLRenderer({
                antialias: true,
                alpha: true
            });

            this.renderer.setSize(window.innerWidth, window.innerHeight);
            this.renderer.shadowMap.enabled = true;
            this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            this.renderer.setPixelRatio(window.devicePixelRatio);

            document.body.appendChild( this.renderer.domElement );

            // scene

            this.scene = new THREE.Scene();

            for ( var ii = 0; ii < this.views.length; ++ ii ) {

                var view = this.views[ ii ];
                var camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
                camera.position.fromArray([0, 0, 180] );
                camera.layers.disableAll();
                camera.layers.enable( ii );
                view.camera = camera;
                camera.lookAt(new THREE.Vector3(0, 5, 0));
            }

            //light

            this.light = new THREE.PointLight( 0xffffff, 0.75 );
            this.light.position.z = 150;
            this.light.position.x = 70;
            this.light.position.y = -20;
            this.scene.add( this.light );

            this.softLight = new THREE.AmbientLight( 0xffffff, 1.5 );
            this.scene.add(this.softLight)

            // group

            this.onResize();
            window.addEventListener( 'resize', this.onResize, false );

            var edges = new THREE.EdgesGeometry( model.children[ 0 ].geometry );
            let line = new THREE.LineSegments( edges );
            line.material.depthTest = false;
            line.material.opacity = 0.5;
            line.material.transparent = true;
            line.position.x = 0.5;
            line.position.z = -1;
            line.position.y = 0.2;

            this.modelGroup = new THREE.Group();

            model.layers.set( 0 );
            line.layers.set( 1 );

            this.modelGroup.add(model);
            this.modelGroup.add(line);
            this.scene.add(this.modelGroup);
        }

        render = () =>
        {
            for ( var ii = 0; ii < this.views.length; ++ ii ) {

                var view = this.views[ ii ];
                var camera = view.camera;

                var bottom = Math.floor( this.h * view.bottom );
                var height = Math.floor( this.h * view.height );

                this.renderer.setViewport( 0, 0, this.w, this.h );
                this.renderer.setScissor( 0, bottom, this.w, height );
                this.renderer.setScissorTest( true );

                camera.aspect = this.w / this.h;
                this.renderer.render( this.scene, camera );
            }
        }

        onResize = () =>
        {
            this.w = window.innerWidth;
            this.h = window.innerHeight;

            for ( var ii = 0; ii < this.views.length; ++ ii ) {
                var view = this.views[ ii ];
                var camera = view.camera;
                camera.aspect = this.w / this.h;
                let camZ = (screen.width - (this.w * 1)) / 3;
                camera.position.z = camZ < 180 ? 180 : camZ;
                camera.updateProjectionMatrix();
            }

            this.renderer.setSize( this.w, this.h );
            this.render();
        }
    }

    function loadModel()
    {
        gsap.registerPlugin(ScrollTrigger);
        gsap.registerPlugin(DrawSVGPlugin);
        gsap.set('#line-length', {drawSVG: 0})
        gsap.set('#line-wingspan', {drawSVG: 0})
        gsap.set('#circle-phalange', {drawSVG: 0})

        var object;

        function onModelLoaded() {
            object.traverse( function ( child ) {
                let mat = new THREE.MeshPhongMaterial( { color: 0x171511, specular: 0xD0CBC7, shininess: 5, flatShading: true } );
                child.material = mat;
            });

            setupAnimation(object);
        }

        var manager = new THREE.LoadingManager( onModelLoaded );
        manager.onProgress = ( item, loaded, total ) => console.log( item, loaded, total );

        var loader = new THREE.OBJLoader( manager );
        loader.load( 'https://assets.codepen.io/557388/1405+Plane_1.obj', function ( obj ) { object = obj; });
    }

    function setupAnimation(model)
    {
        let scene = new Scene(model);
        let plane = scene.modelGroup;

        gsap.fromTo('canvas',{x: "50%", autoAlpha: 0},  {duration: 1, x: "0%", autoAlpha: 1});
        gsap.to('.loading', {autoAlpha: 0})
        gsap.to('.scroll-cta', {opacity: 1})
        gsap.set('svg', {autoAlpha: 1})

        let tau = Math.PI * 2;

        gsap.set(plane.rotation, {y: tau * -.25});
        gsap.set(plane.position, {x: 80, y: -32, z: -60});

        scene.render();

        var sectionDuration = 1;
        gsap.fromTo(scene.views[1],
                { 	height: 1, bottom: 0 },
                {
                    height: 0, bottom: 1,
                    ease: 'none',
                    scrollTrigger: {
                        trigger: ".blueprint",
                        scrub: true,
                        start: "bottom bottom",
                        end: "bottom top"
                    }
                })

        gsap.fromTo(scene.views[1],
                { 	height: 0, bottom: 0 },
                {
                    height: 1, bottom: 0,
                    ease: 'none',
                    scrollTrigger: {
                        trigger: ".blueprint",
                        scrub: true,
                        start: "top bottom",
                        end: "top top"
                    }
                })

        gsap.to('.ground', {
            y: "30%",
            scrollTrigger: {
                trigger: ".ground-container",
                scrub: true,
                start: "top bottom",
                end: "bottom top"
            }
        })

        gsap.from('.clouds', {
            y: "25%",
            scrollTrigger: {
                trigger: ".ground-container",
                scrub: true,
                start: "top bottom",
                end: "bottom top"
            }
        })

        gsap.to('#line-length', {
            drawSVG: 100,
            scrollTrigger: {
                trigger: ".length",
                scrub: true,
                start: "top bottom",
                end: "top top"
            }
        })

        gsap.to('#line-wingspan', {
            drawSVG: 100,
            scrollTrigger: {
                trigger: ".wingspan",
                scrub: true,
                start: "top 25%",
                end: "bottom 50%"
            }
        })

        gsap.to('#circle-phalange', {
            drawSVG: 100,
            scrollTrigger: {
                trigger: ".phalange",
                scrub: true,
                start: "top 50%",
                end: "bottom 100%"
            }
        })

        gsap.to('#line-length', {
            opacity: 0,
            drawSVG: 0,
            scrollTrigger: {
                trigger: ".length",
                scrub: true,
                start: "top top",
                end: "bottom top"
            }
        })

        gsap.to('#line-wingspan', {
            opacity: 0,
            drawSVG: 0,
            scrollTrigger: {
                trigger: ".wingspan",
                scrub: true,
                start: "top top",
                end: "bottom top"
            }
        })

        gsap.to('#circle-phalange', {
            opacity: 0,
            drawSVG: 0,
            scrollTrigger: {
                trigger: ".phalange",
                scrub: true,
                start: "top top",
                end: "bottom top"
            }
        })

        let tl = new gsap.timeline(
                {
                    onUpdate: scene.render,
                    scrollTrigger: {
                        trigger: ".content",
                        scrub: true,
                        start: "top top",
                        end: "bottom bottom"
                    },
                    defaults: {duration: sectionDuration, ease: 'power2.inOut'}
                });

        let delay = 0;

        tl.to('.scroll-cta', {duration: 0.25, opacity: 0}, delay)
        tl.to(plane.position, {x: -10, ease: 'power1.in'}, delay)

        delay += sectionDuration;

        tl.to(plane.rotation, {x: tau * .25, y: 0, z: -tau * 0.05, ease: 'power1.inOut'}, delay)
        tl.to(plane.position, {x: -40, y: 0, z: -60, ease: 'power1.inOut'}, delay)

        delay += sectionDuration;

        tl.to(plane.rotation, {x: tau * .25, y: 0,  z: tau * 0.05, ease: 'power3.inOut'}, delay)
        tl.to(plane.position, {x: 40, y: 0, z: -60, ease: 'power2.inOut'}, delay)

        delay += sectionDuration;

        tl.to(plane.rotation, {x: tau * .2, y: 0, z: -tau * 0.1, ease: 'power3.inOut'}, delay)
        tl.to(plane.position, {x: -40, y: 0, z: -30, ease: 'power2.inOut'}, delay)

        delay += sectionDuration;

        tl.to(plane.rotation, { x: 0, z: 0, y: tau * .25}, delay)
        tl.to(plane.position, { x: 0, y: -10, z: 50}, delay)

        delay += sectionDuration;
        delay += sectionDuration;

        tl.to(plane.rotation, {x: tau * 0.25, y: tau *.5, z: 0, ease:'power4.inOut'}, delay)
        tl.to(plane.position, {z: 30, ease:'power4.inOut'}, delay)

        delay += sectionDuration;

        tl.to(plane.rotation, {x: tau * 0.25, y: tau *.5, z: 0, ease:'power4.inOut'}, delay)
        tl.to(plane.position, {z: 60, x: 30, ease:'power4.inOut'}, delay)

        delay += sectionDuration;

        tl.to(plane.rotation, {x: tau * 0.35, y: tau *.75, z: tau * 0.6, ease:'power4.inOut'}, delay)
        tl.to(plane.position, {z: 100, x: 20, y: 0, ease:'power4.inOut'}, delay)

        delay += sectionDuration;

        tl.to(plane.rotation, {x: tau * 0.15, y: tau *.85, z: -tau * 0, ease: 'power1.in'}, delay)
        tl.to(plane.position, {z: -150, x: 0, y: 0, ease: 'power1.inOut'}, delay)

        delay += sectionDuration;

        tl.to(plane.rotation, {duration: sectionDuration, x: -tau * 0.05, y: tau, z: -tau * 0.1, ease: 'none'}, delay)
        tl.to(plane.position, {duration: sectionDuration, x: 0, y: 30, z: 320, ease: 'power1.in'}, delay)

        tl.to(scene.light.position, {duration: sectionDuration, x: 0, y: 0, z: 0}, delay)
    }

    window.addEventListener('load', function() {
        gsap.registerPlugin(ScrollTrigger, DrawSVGPlugin);

        gsap.fromTo(".section", { opacity: 0, y: 50 }, {
            opacity: 1,
            y: 0,
            scrollTrigger: {
                trigger: ".section",
                start: "top center",
                end: "bottom center",
                scrub: true,
            }
        });

        // Example use of DrawSVGPlugin
        gsap.from("#line-length", { duration: 2, drawSVG: "0% 100%" });
    });

    loadModel();


</script>
</body>
</html>